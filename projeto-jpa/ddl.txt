CREATE TABLE usuario (ID  SERIAL NOT NULL, DATANASC DATE, EMAIL VARCHAR(255), NOME VARCHAR(255), SENHA VARCHAR(255), PRIMARY KEY (ID))
CREATE INDEX index_nome_usuario ON usuario (nome)
CREATE TABLE genero (ID  SERIAL NOT NULL, NOME VARCHAR(255), PRIMARY KEY (ID))
CREATE INDEX index_nome_genero ON genero (nome)
CREATE TABLE VISUALIZACAO (ID  SERIAL NOT NULL, DATA TIMESTAMP, FILME_ID INTEGER, USUARIO_ID INTEGER, PRIMARY KEY (ID))
CREATE INDEX INDEX_VISUALIZACAO_usuario ON VISUALIZACAO (usuario)
CREATE TABLE filme (ID  SERIAL NOT NULL, ANO INTEGER, CAPA BYTEA, CLASSIFICACAO VARCHAR(255), DESCRICAO VARCHAR(255), DURACAO VARCHAR(255), TITULO VARCHAR(255), VERSAO INTEGER, PRIMARY KEY (ID))
CREATE INDEX index_titulo_filme ON filme (titulo)
CREATE TABLE genero_filme (generos_ID INTEGER NOT NULL, filmes_ID INTEGER NOT NULL, PRIMARY KEY (generos_ID, filmes_ID))
ALTER TABLE VISUALIZACAO ADD CONSTRAINT FK_VISUALIZACAO_FILME_ID FOREIGN KEY (FILME_ID) REFERENCES filme (ID)
ALTER TABLE VISUALIZACAO ADD CONSTRAINT FK_VISUALIZACAO_USUARIO_ID FOREIGN KEY (USUARIO_ID) REFERENCES usuario (ID)
ALTER TABLE genero_filme ADD CONSTRAINT FK_genero_filme_filmes_ID FOREIGN KEY (filmes_ID) REFERENCES filme (ID)
ALTER TABLE genero_filme ADD CONSTRAINT FK_genero_filme_generos_ID FOREIGN KEY (generos_ID) REFERENCES genero (ID)
